/* build at 2013-07-24 10:49:08 */
for(var cityData={city:[{name:"中国大陆",code:"CN",nodes:[{name:"北京",code:"11",nodes:[{name:"北京",code:"北京"}]},{name:"天津",code:"12",nodes:[{name:"天津",code:"天津"}]},{name:"上海",code:"31",nodes:[{name:"上海",code:"上海"}]},{name:"重庆",code:"50",nodes:[{name:"重庆",code:"重庆"}]},{name:"安徽",code:"34",nodes:[{name:"合肥",code:"合肥"},{name:"芜湖",code:"芜湖"},{name:"蚌埠",code:"蚌埠"},{name:"淮南",code:"淮南"},{name:"马鞍山",code:"马鞍山"},{name:"淮北",code:"淮北"},{name:"铜陵",code:"铜陵"},{name:"安庆",code:"安庆"},{name:"黄山",code:"黄山"},{name:"滁州",code:"滁州"},{name:"阜阳",code:"阜阳"},{name:"宿州",code:"宿州"},{name:"巢湖",code:"巢湖"},{name:"六安",code:"六安"},{name:"亳州",code:"亳州"},{name:"池州",code:"池州"},{name:"宣城",code:"宣城"}]},{name:"福建",code:"35",nodes:[{name:"福州",code:"福州"},{name:"厦门",code:"厦门"},{name:"莆田",code:"莆田"},{name:"三明",code:"三明"},{name:"泉州",code:"泉州"},{name:"漳州",code:"漳州"},{name:"南平",code:"南平"},{name:"龙岩",code:"龙岩"},{name:"宁德",code:"宁德"}]},{name:"甘肃",code:"62",nodes:[{name:"兰州",code:"兰州"},{name:"嘉峪关",code:"嘉峪关"},{name:"金昌",code:"金昌"},{name:"白银",code:"白银"},{name:"天水",code:"天水"},{name:"武威",code:"武威"},{name:"张掖",code:"张掖"},{name:"平凉",code:"平凉"},{name:"酒泉",code:"酒泉"},{name:"庆阳",code:"庆阳"},{name:"定西",code:"定西"},{name:"陇南",code:"陇南"},{name:"临夏",code:"临夏"},{name:"甘南",code:"甘南"}]},{name:"广东",code:"44",nodes:[{name:"广州",code:"广州"},{name:"韶关",code:"韶关"},{name:"深圳",code:"深圳"},{name:"珠海",code:"珠海"},{name:"汕头",code:"汕头"},{name:"佛山",code:"佛山"},{name:"江门",code:"江门"},{name:"湛江",code:"湛江"},{name:"茂名",code:"茂名"},{name:"肇庆",code:"肇庆"},{name:"惠州",code:"惠州"},{name:"梅州",code:"梅州"},{name:"汕尾",code:"汕尾"},{name:"河源",code:"河源"},{name:"阳江",code:"阳江"},{name:"清远",code:"清远"},{name:"东莞",code:"东莞"},{name:"中山",code:"中山"},{name:"潮州",code:"潮州"},{name:"揭阳",code:"揭阳"},{name:"云浮",code:"云浮"}]},{name:"广西",code:"45",nodes:[{name:"南宁",code:"南宁"},{name:"柳州",code:"柳州"},{name:"桂林",code:"桂林"},{name:"梧州",code:"梧州"},{name:"北海",code:"北海"},{name:"防城港",code:"防城港"},{name:"钦州",code:"钦州"},{name:"贵港",code:"贵港"},{name:"玉林",code:"玉林"},{name:"百色",code:"百色"},{name:"贺州",code:"贺州"},{name:"河池",code:"河池"}]},{name:"贵州",code:"52",nodes:[{name:"贵阳",code:"贵阳"},{name:"六盘水",code:"六盘水"},{name:"遵义",code:"遵义"},{name:"安顺",code:"安顺"},{name:"铜仁",code:"铜仁"},{name:"黔西南",code:"黔西南"},{name:"毕节",code:"毕节"},{name:"黔东南",code:"黔东南"},{name:"黔南",code:"黔南"}]},{name:"海南",code:"46",nodes:[{name:"海口",code:"海口"},{name:"三亚",code:"三亚"}]},{name:"河北",code:"13",nodes:[{name:"石家庄",code:"石家庄"},{name:"唐山",code:"唐山"},{name:"秦皇岛",code:"秦皇岛"},{name:"邯郸",code:"邯郸"},{name:"邢台",code:"邢台"},{name:"保定",code:"保定"},{name:"张家口",code:"张家口"},{name:"承德",code:"承德"},{name:"沧州",code:"沧州"},{name:"廊坊",code:"廊坊"},{name:"衡水",code:"衡水"}]},{name:"黑龙江",code:"23",nodes:[{name:"哈尔滨",code:"哈尔滨"},{name:"齐齐哈尔",code:"齐齐哈尔"},{name:"鸡西",code:"鸡西"},{name:"鹤岗",code:"鹤岗"},{name:"双鸭山",code:"双鸭山"},{name:"大庆",code:"大庆"},{name:"伊春",code:"伊春"},{name:"佳木斯",code:"佳木斯"},{name:"七台河",code:"七台河"},{name:"牡丹江",code:"牡丹江"},{name:"黑河",code:"黑河"},{name:"绥化",code:"绥化"},{name:"大兴安岭",code:"大兴安岭"}]},{name:"河南",code:"41",nodes:[{name:"郑州",code:"郑州"},{name:"开封",code:"开封"},{name:"洛阳",code:"洛阳"},{name:"平顶山",code:"平顶山"},{name:"安阳",code:"安阳"},{name:"鹤壁",code:"鹤壁"},{name:"新乡",code:"新乡"},{name:"焦作",code:"焦作"},{name:"濮阳",code:"濮阳"},{name:"许昌",code:"许昌"},{name:"漯河",code:"漯河"},{name:"三门峡",code:"三门峡"},{name:"南阳",code:"南阳"},{name:"商丘",code:"商丘"},{name:"信阳",code:"信阳"},{name:"周口",code:"周口"},{name:"驻马店",code:"驻马店"}]},{name:"湖北",code:"42",nodes:[{name:"武汉",code:"武汉"},{name:"黄石",code:"黄石"},{name:"十堰",code:"十堰"},{name:"宜昌",code:"宜昌"},{name:"襄樊",code:"襄樊"},{name:"鄂州",code:"鄂州"},{name:"荆门",code:"荆门"},{name:"孝感",code:"孝感"},{name:"荆州",code:"荆州"},{name:"黄冈",code:"黄冈"},{name:"咸宁",code:"咸宁"},{name:"随州",code:"随州"},{name:"恩施",code:"恩施"},{name:"潜江",code:"潜江"},{name:"天门",code:"天门"}]},{name:"湖南",code:"43",nodes:[{name:"长沙",code:"长沙"},{name:"株洲",code:"株洲"},{name:"湘潭",code:"湘潭"},{name:"衡阳",code:"衡阳"},{name:"邵阳",code:"邵阳"},{name:"岳阳",code:"岳阳"},{name:"常德",code:"常德"},{name:"张家界",code:"张家界"},{name:"益阳",code:"益阳"},{name:"郴州",code:"郴州"},{name:"永州",code:"永州"},{name:"怀化",code:"怀化"},{name:"娄底",code:"娄底"},{name:"湘西",code:"湘西"}]},{name:"内蒙古",code:"15",nodes:[{name:"呼和浩特",code:"呼和浩特"},{name:"包头",code:"包头"},{name:"乌海",code:"乌海"},{name:"赤峰",code:"赤峰"},{name:"通辽",code:"通辽"},{name:"鄂尔多斯",code:"鄂尔多斯"},{name:"呼伦贝尔",code:"呼伦贝尔"},{name:"兴安盟",code:"兴安盟"},{name:"锡林郭勒盟",code:"锡林郭勒盟"},{name:"乌兰察布盟",code:"乌兰察布盟"},{name:"巴彦淖尔盟",code:"巴彦淖尔盟"},{name:"阿拉善盟",code:"阿拉善盟"}]},{name:"江苏",code:"32",nodes:[{name:"南京",code:"南京"},{name:"无锡",code:"无锡"},{name:"徐州",code:"徐州"},{name:"常州",code:"常州"},{name:"苏州",code:"苏州"},{name:"南通",code:"南通"},{name:"连云港",code:"连云港"},{name:"淮安",code:"淮安"},{name:"盐城",code:"盐城"},{name:"扬州",code:"扬州"},{name:"镇江",code:"镇江"},{name:"泰州",code:"泰州"},{name:"宿迁",code:"宿迁"}]},{name:"江西",code:"36",nodes:[{name:"南昌",code:"南昌"},{name:"景德镇",code:"景德镇"},{name:"萍乡",code:"萍乡"},{name:"九江",code:"九江"},{name:"新余",code:"新余"},{name:"鹰潭",code:"鹰潭"},{name:"赣州",code:"赣州"},{name:"吉安",code:"吉安"},{name:"宜春",code:"宜春"},{name:"抚州",code:"抚州"},{name:"上饶",code:"上饶"}]},{name:"吉林",code:"22",nodes:[{name:"长春",code:"长春"},{name:"吉林",code:"吉林"},{name:"四平",code:"四平"},{name:"辽源",code:"辽源"},{name:"通化",code:"通化"},{name:"白山",code:"白山"},{name:"松原",code:"松原"},{name:"白城",code:"白城"},{name:"延边",code:"延边"}]},{name:"辽宁",code:"21",nodes:[{name:"沈阳",code:"沈阳"},{name:"大连",code:"大连"},{name:"鞍山",code:"鞍山"},{name:"抚顺",code:"抚顺"},{name:"本溪",code:"本溪"},{name:"丹东",code:"丹东"},{name:"锦州",code:"锦州"},{name:"营口",code:"营口"},{name:"阜新",code:"阜新"},{name:"辽阳",code:"辽阳"},{name:"盘锦",code:"盘锦"},{name:"铁岭",code:"铁岭"},{name:"朝阳",code:"朝阳"},{name:"葫芦岛",code:"葫芦岛"}]},{name:"宁夏",code:"64",nodes:[{name:"银川",code:"银川"},{name:"石嘴山",code:"石嘴山"},{name:"吴忠",code:"吴忠"},{name:"固原",code:"固原"}]},{name:"青海",code:"63",nodes:[{name:"西宁",code:"西宁"},{name:"海东",code:"海东"},{name:"海北",code:"海北"},{name:"黄南",code:"黄南"},{name:"海南",code:"海南"},{name:"果洛",code:"果洛"},{name:"玉树",code:"玉树"},{name:"海西",code:"海西"}]},{name:"山西",code:"14",nodes:[{name:"太原",code:"太原"},{name:"大同",code:"大同"},{name:"阳泉",code:"阳泉"},{name:"长治",code:"长治"},{name:"晋城",code:"晋城"},{name:"朔州",code:"朔州"},{name:"晋中",code:"晋中"},{name:"运城",code:"运城"},{name:"忻州",code:"忻州"},{name:"临汾",code:"临汾"},{name:"吕梁",code:"吕梁"}]},{name:"山东",code:"37",nodes:[{name:"济南",code:"济南"},{name:"青岛",code:"青岛"},{name:"淄博",code:"淄博"},{name:"枣庄",code:"枣庄"},{name:"东营",code:"东营"},{name:"烟台",code:"烟台"},{name:"潍坊",code:"潍坊"},{name:"济宁",code:"济宁"},{name:"泰安",code:"泰安"},{name:"威海",code:"威海"},{name:"日照",code:"日照"},{name:"莱芜",code:"莱芜"},{name:"临沂",code:"临沂"},{name:"德州",code:"德州"},{name:"聊城",code:"聊城"},{name:"滨州",code:"滨州"},{name:"菏泽",code:"菏泽"}]},{name:"四川",code:"51",nodes:[{name:"成都",code:"成都"},{name:"自贡",code:"自贡"},{name:"攀枝花",code:"攀枝花"},{name:"泸州",code:"泸州"},{name:"德阳",code:"德阳"},{name:"绵阳",code:"绵阳"},{name:"广元",code:"广元"},{name:"遂宁",code:"遂宁"},{name:"内江",code:"内江"},{name:"乐山",code:"乐山"},{name:"南充",code:"南充"},{name:"眉山",code:"眉山"},{name:"宜宾",code:"宜宾"},{name:"广安",code:"广安"},{name:"达州",code:"达州"},{name:"雅安",code:"雅安"},{name:"巴中",code:"巴中"},{name:"资阳",code:"资阳"},{name:"阿坝",code:"阿坝"},{name:"甘孜",code:"甘孜"},{name:"凉山",code:"凉山"}]},{name:"西藏",code:"54",nodes:[{name:"拉萨",code:"拉萨"},{name:"昌都",code:"昌都"},{name:"山南",code:"山南"},{name:"日喀则",code:"日喀则"},{name:"那曲",code:"那曲"},{name:"阿里",code:"阿里"},{name:"林芝",code:"林芝"}]},{name:"新疆",code:"65",nodes:[{name:"乌鲁木齐",code:"乌鲁木齐"},{name:"石河子",code:"石河子"},{name:"克拉玛依",code:"克拉玛依"},{name:"吐鲁番",code:"吐鲁番"},{name:"哈密",code:"哈密"},{name:"昌吉",code:"昌吉"},{name:"博尔塔拉",code:"博尔塔拉"},{name:"巴音郭楞",code:"巴音郭楞"},{name:"阿克苏",code:"阿克苏"},{name:"克孜勒苏",code:"克孜勒苏"},{name:"喀什",code:"喀什"},{name:"和田",code:"和田"},{name:"伊犁",code:"伊犁"},{name:"塔城",code:"塔城"},{name:"阿勒泰",code:"阿勒泰"},{name:"库尔勒",code:"库尔勒"}]},{name:"云南",code:"53",nodes:[{name:"昆明",code:"昆明"},{name:"曲靖",code:"曲靖"},{name:"玉溪",code:"玉溪"},{name:"保山",code:"保山"},{name:"昭通",code:"昭通"},{name:"楚雄",code:"楚雄"},{name:"红河",code:"红河"},{name:"文山",code:"文山"},{name:"思茅",code:"思茅"},{name:"西双版纳",code:"西双版纳"},{name:"大理",code:"大理"},{name:"德宏",code:"德宏"},{name:"丽江",code:"丽江"},{name:"怒江",code:"怒江"},{name:"迪庆",code:"迪庆"},{name:"临沧",code:"临沧"}]},{name:"浙江",code:"33",nodes:[{name:"杭州",code:"杭州"},{name:"宁波",code:"宁波"},{name:"温州",code:"温州"},{name:"嘉兴",code:"嘉兴"},{name:"湖州",code:"湖州"},{name:"绍兴",code:"绍兴"},{name:"金华",code:"金华"},{name:"衢州",code:"衢州"},{name:"舟山",code:"舟山"},{name:"台州",code:"台州"},{name:"丽水",code:"丽水"}]},{name:"陕西",code:"61",nodes:[{name:"西安",code:"西安"},{name:"铜川",code:"铜川"},{name:"宝鸡",code:"宝鸡"},{name:"咸阳",code:"咸阳"},{name:"渭南",code:"渭南"},{name:"延安",code:"延安"},{name:"汉中",code:"汉中"},{name:"榆林",code:"榆林"},{name:"安康",code:"安康"},{name:"商洛",code:"商洛"}]}]}]},j=0;j<cityData.city[0].nodes.length;j++)for(var k=0;k<cityData.city[0].nodes[j].nodes.length;k++)cityData.city[0].nodes[j].nodes[k].code=cityData.city[0].code+"-"+cityData.city[0].nodes[j].code+"-"+cityData.city[0].nodes[j].nodes[k].code;!function(a){a.fn.msCityPlugin=function(b){var c={type:"city",check:"checkbox",maxCount:5,column:6,comData:[],init:[],style:{foldHeadWidth:"78px",msCbComponent:"88px",msOkWidth:"150px"},align:"left"},d=a.extend(c,b),e="<div class='ms-btn-component ms-btn-canhover'></div><div class='txt-box-component'><input type='text' class='ms-txt-component' maxlengh='20' name='' value='' /></div><input type='hidden' class='ms_checkInput' value='' name='"+d.type+"Code' />";switch(a(this).append(a(e)),d.structure="",d.allData=[],d.listData=[],d.hotData=[],d.id="",d.type){case"city":d.id="msPickCity",d.structure="<div class='ms-pick' id='"+d.id+"'>"+"<div class='w-h-tab-component'>"+"<ul class='h-tab clear'>"+"<li class='tab-menu-component active'>常用城市</li>"+"<li class='tab-menu-component'>按省市选择</li>"+"</ul>"+"<a class='close-component' href='javascript:;'>删除</a>"+"</div>"+"<div class='c-tab'>"+"<div class='tab-con-component'>"+"<div class='common'>"+"</div>"+"</div>"+"<div class='tab-con-component tab-con-width' style='display:none'>"+"<div class='ms-h3-component'>热门城市</div>"+"<div class='hot-city'>"+"</div>"+"<div class='ms-h3-component' >其它省市</div>"+"<div class='otherAll'>"+"</div>"+"</div>"+"</div>"+"</div>",d.allData=cityData.city[0],d._allData={nodes:[]},d.listData={nodes:[]},d.hotData={nodes:[]};for(var f=0;f<d.allData.nodes.length;f++)for(var g=0;g<d.allData.nodes[f].nodes.length;g++)1==d.allData.nodes[f].nodes.length&&d.hotData.nodes.push(d.allData.nodes[f].nodes[g]),d.listData.nodes.push(d.allData.nodes[f].nodes[g]);d._allData.nodes=d.allData.nodes.slice(4).concat([]),d.allData=[],d.allData=d._allData}a("body").append(a(d.structure)),d.createDom=function(){if(this.comData.nodes){for(var b="",c=0;c<this.comData.nodes.length;c++)b+="<label class='ms-cb-component' style='width:"+this.style.msCbComponent+"'><input type="+this.check+" name='"+this.type+"com' class='ms-cb-cb' value="+this.comData.nodes[c].code+" ms-cb-data="+this.comData.nodes[c].name+" />"+this.comData.nodes[c].name+"</label>";a("#"+this.id).find(".common").append(a(b))}if(this.hotData.nodes){for(var d="",c=0;c<this.hotData.nodes.length;c++)d+="<label class='ms-cb-component' style='width:"+this.style.msCbComponent+"'><input type="+this.check+" name='"+this.type+"hot'+ class='ms-cb-cb' value="+this.hotData.nodes[c].code+" ms-cb-data="+this.hotData.nodes[c].name+" />"+this.hotData.nodes[c].name+"</label>";a("#"+this.id).find(".hot-city").append(a(d))}for(var e=this.allData.nodes.length,f=Math.ceil(e/this.column),g="",c=0;f>c;c++){for(var h="",i="",j=c*this.column;j<(c+1)*this.column&&e>j;j++){h+="<span style='width:"+this.style.foldHeadWidth+"'><label>"+this.allData.nodes[j].name+"</label></span>";for(var k="",l=0;l<this.allData.nodes[j].nodes.length;l++)k+="<label class='ms-cb-component' style='width:"+this.style.msCbComponent+"'><input type="+this.check+" class='ms-cb-cb' name="+this.type+" value="+this.allData.nodes[j].nodes[l].code+" ms-cb-data="+this.allData.nodes[j].nodes[l].name+" />"+this.allData.nodes[j].nodes[l].name+"</label>";i+="<div class='fold-con-component' >"+k+"</div>"}g+="<div class='foldable'><div class='fold-head-component'>"+h+"</div>"+i+"</div>"}a("#"+this.id).find(".otherAll").append(a(g));var m=a("#"+this.id).find(".fold-con-component"),n=a("#"+this.id).find(".fold-head-component").find("span");n.on("click",function(){n.removeClass("active"),m.hide();var b=a(this).index();a(this).parent().find("span").removeClass("active"),a(this).addClass("active"),a(this).parent().parent().find(".fold-con-component").hide().eq(b).show()})},d.createDom();var h=function(){if(d.init.length>0){var a=[];if("city"==d.type)for(var b=0;b<d.init.length;b++)for(var c=0;c<d.allData.nodes.length;c++)for(var e=0;e<d.allData.nodes[c].nodes.length;e++){var f=d.allData.nodes[c].nodes[e].code.split("-")[2];d.init[b].code==f&&a.push(d.allData.nodes[c].nodes[e].code)}else for(var b=0;b<d.init.length;b++)a.push(d.init[b].code);return a}return[]},i={index:0,keyArray:[13,38,40],selectLenght:0,aMsCb:[],msCheckInputArr:h(),max:5},j=a(this);d.addDefault=function(){if(d.createDiv=a("#"+this.id),this.init.length>0){for(var b="",c=[],e=0;e<this.init.length;e++)b+="<a href='javascript:;' class='ms-selected-item' rel="+i.msCheckInputArr[e]+">"+"<span class='text'>"+this.init[e].name+"</span>"+"<span class='delete-component'>删除</span></a>",c.push(i.msCheckInputArr[e]);a(b).insertBefore(j.find(".ms-txt-component")),j.find(".ms_checkInput").val(c.join(",")),i.aMsCb=this.createDiv.find(".ms-cb-cb");for(var e=0;e<i.msCheckInputArr.length;e++)for(var f=0;f<i.aMsCb.length;f++)i.msCheckInputArr[e]==i.aMsCb[f].value&&(i.aMsCb[f].checked=!0)}},d.addDefault(),d.mpPosition=function(){var a=j.offset().left,b=j.find(".ms-txt-component").offset().top+25;switch(this.align){case"left":this.createDiv.css({left:a,top:b});break;case"right":a-=parseInt(this.createDiv.css("width"))-j.outerWidth()+2,this.createDiv.css({left:a,top:b})}};var k=j.find(".txt-box-component"),l=j.find(".ms-txt-component");return d.txt=function(){var b=this;l.on("keyup",function(e){for(var f=a(this).val(),g=[],h="",k="",l=j.find(".ms-ok-component"),m=j.find(".ms-error-component"),n="",o=!1,p=0;p<i.keyArray.length;p++)e.keyCode==i.keyArray[p]&&(o=!0);if(b.createDiv.hide(),!o){for(var p=0,q=b.listData.nodes.length;q>p;p++)b.listData.nodes[p].name.indexOf(f)>-1&&""!=f&&g.push(b.listData.nodes[p]);if(l&&l.remove(),m&&m.remove(),g.length>0){g.length>i.max&&(g.length=i.max);for(var p=0;p<g.length;p++)h+="<li rel="+g[p].code+"><a href='javascript:;'>"+g[p].name+"</a></li>";k="<div class='ms-ok-component' style='width:"+b.style.msOkWidth+"'>"+"<ul class='ms-list-component'>"+h+"</ul></div>"}0==g.length&&""!=f&&(k="<div class='ms-error-component'>您输入的信息不存在，请重新输入</div>"),j.append(a(k)),i.index=0,j.find("li").eq(i.index).addClass("active"),c()}var r=j.find("li");r.on("mouseover",function(){r.removeClass("active"),a(this).addClass("active"),i.index=a(this).index()});var s=function(c){var e=j.find(".ms-ok-component").find(".active").text(),f=j.find(".ms-ok-component").find(".active").attr("rel");if(n="<a href='javascript:;' class='ms-selected-item' rel="+f+">"+"<span class='text'>"+e+"</span>"+"<span class='delete-component'>删除</span></a>","radio"==b.check&&(j.find(".txt-box-component").find("a").remove(),j.find(".ms_checkInput").val(f)),"checkbox"==b.check){if(i.selectLenght=i.msCheckInputArr.length,i.selectLenght>=c)return j.find(".ms-txt-component").val(""),l&&l.remove(),alert("最多选择5项"),void 0;for(var g=j.find(".txt-box-component").find(".ms-selected-item"),h=!1,k=0;k<g.length;k++)g[k].getAttribute("rel")==f&&(h=!0);if(h)return j.find(".ms-txt-component").val(""),void 0;i.msCheckInputArr.push(f),j.find(".ms_checkInput").val(i.msCheckInputArr.join(","))}a(n).insertBefore(j.find(".ms-txt-component")),j.find(".ms-txt-component").val(""),i.aMsCb=b.createDiv.find(".ms-cb-cb"),i.aMsCb.each(function(){a(this).attr("value")==f&&a(this).attr("checked",!0)}),l&&l.remove(),d.mpPosition()};if(13==e.keyCode){if(0==r.length)return a(this).val(""),void 0;s(5)}switch(r.on("click",function(){s(5)}),e.keyCode){case 38:i.index--,-1==i.index&&(i.index=r.length-1),r.removeClass("active"),r.eq(i.index).addClass("active");break;case 40:i.index++,i.index==r.length&&(i.index=0),r.removeClass("active"),r.eq(i.index).addClass("active")}}),j.find(".ms-txt-component").on("keydown",function(c){var e=j.find(".txt-box-component").find(".ms-selected-item:last");if(8==c.keyCode&&""==a(this).val()){if("radio"==b.check&&(e.remove(),j.find(".ms-txt-component").val(""),j.find(".ms_checkInput").val(""),b.createDiv.find(".ms-cb-cb").attr("checked",!1)),"checkbox"==b.check){i.aMsCb=b.createDiv.find(".ms-cb-cb");for(var f=0;f<i.msCheckInputArr.length;f++)e.attr("rel")==i.msCheckInputArr[f]&&i.msCheckInputArr.pop();j.find(".ms_checkInput").val(i.msCheckInputArr.join(","));for(var f=0;f<i.aMsCb.length;f++)e.attr("rel")==i.aMsCb[f].value&&(i.aMsCb[f].checked=!1);e.remove()}d.mpPosition()}});var c=function(){var b=j.find(".ms-txt-component").position().left,c=j.find(".ms-txt-component").position().top+30;a(".ms-ok-component").css({left:b,top:c}),a(".ms-error-component").css({left:b,top:c})}},d.ckBox=function(){var c=this.createDiv.find(".h-tab").find(".tab-menu-component"),e=this.createDiv.find(".c-tab").find(".tab-con-component"),f=this.createDiv.find(".w-h-tab-component").find(".close-component"),g=[],h=this;c.length>=2&&c.on("click",function(){var b=a(this).index();switch(b){case 0:h.createDiv.css("width","400px");break;case 1:h.createDiv.css("width","570px")}d.mpPosition(),a(this).parent().find("li").removeClass("active"),a(this).addClass("active"),e.hide(),e.eq(b).show()}),f.on("click",function(){h.createDiv.hide()}),i.aMsCb=this.createDiv.find(".ms-cb-cb");var k=this.createDiv.find(".ms-cb-component");k.on("change",function(){var c=a(this).find(".ms-cb-cb"),e=c.attr("ms-cb-data"),f=c.val(),k="<a href='javascript:;' class='ms-selected-item' rel="+f+">"+"<span class='text'>"+e+"</span>"+"<span class='delete-component'>删除</span></a>";if("radio"==h.check&&(j.find("a").remove(),a(k).insertBefore(j.find(".ms-txt-component")),j.find(".txt-box-component").val(f),j.find(".ms-txt-component").val(""),i.aMsCb=h.createDiv.find(".ms-cb-cb"),i.aMsCb.attr("checked",!1),i.aMsCb.each(function(){a(this).attr("value")==f&&a(this).attr("checked",!0)}),j.find(".ms_checkInput").val(f)),"checkbox"==h.check){selectCityLenght=i.msCheckInputArr.length;var l=function(){for(var a=[],b=0;b<i.msCheckInputArr.length;b++)c.val()!=i.msCheckInputArr[b]&&a.push(i.msCheckInputArr[b]);i.msCheckInputArr=a,j.find(".ms_checkInput").val(a.join(","))};if(selectCityLenght>=b.maxCount){if("checked"==c.attr("checked"))return a(this).find(".ms-cb-cb").attr("checked",!1),alert("最多选择5项"),void 0;l()}if(g=j.find(".ms-selected-item"),c.attr("checked")){for(var m=0;m<i.aMsCb.length;m++)c.val()==i.aMsCb[m].value&&(i.aMsCb[m].checked=!0);a(k).insertBefore(j.find(".ms-txt-component")),i.msCheckInputArr.push(f),j.find(".ms_checkInput").val(i.msCheckInputArr.join(","))}else{for(var m=0;m<i.aMsCb.length;m++)c.val()==i.aMsCb[m].value&&(i.aMsCb[m].checked=!1);g.each(function(){a(this).attr("rel")==c.attr("value")&&a(this).remove()}),l()}}j.find(".ms-ok-component")&&j.find(".ms-ok-component").remove(),d.mpPosition()})},k.on("click",function(b){a(".ms-pick").hide(),d.createDiv.show(),d.mpPosition(),l.focus(),b.stopPropagation()}),setTimeout(function(){d.txt(),d.ckBox()},100),a(document).click(function(){j.find(".ms-ok-component")&&j.find(".ms-ok-component").remove(),j.find(".ms-error-component")&&j.find(".ms-error-component").remove()}),d.removeA=function(){var b=[],c=this;j.find(".txt-box-component").on("click",".delete-component",function(){if("radio"==c.check&&(a(this).parent(".ms-selected-item").remove(),c.createDiv.find(".ms-cb-cb").attr("checked",!1),j.find(".ms_checkInput").val(""),d.mpPosition()),"checkbox"==c.check){if(c.createDiv.find(".ms-cb-cb").length>0){b=c.createDiv.find(".ms-cb-cb:checked");var e=a(this);b.each(function(){a(this).attr("value")==e.parent().attr("rel")&&a(this).attr("checked",!1)})}for(var f=[],g=0;g<i.msCheckInputArr.length;g++)a(this).parent().attr("rel")!=i.msCheckInputArr[g]&&f.push(i.msCheckInputArr[g]);return i.msCheckInputArr=f,j.find(".ms_checkInput").val(f.join(",")),a(this).parent(".ms-selected-item").remove(),d.mpPosition(),!1}})},d.removeA(),a(window).resize(function(){d.mpPosition()}),a(document).on("click",function(){a(".ms-pick").hide()}),a(".ms-pick").on("click",function(a){a.stopPropagation()}),this}}(jQuery);